<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>중복체크</title>

<!-- 중복확인을 해주는 HTMl 팝업창 파일 -->

<script type="text/javascript">

	// 이미 들어있을 아이디값
	var ids=["khacademy","java","script"];
	
	// 들어오는 값이 있는지 확인
	function confirmChk(){
		// 아이디 입력받은 input 텍스트태그 value 가져와 변수 : id에 저장
		var id=document.getElementsByName("id")[0].value;

		// div 태그 NodeList 변수 div에 담음
		var div=document.getElementsByTagName("div")[0];


		// indexOf() 메서드는 배열에서 지정된 요소를 찾을 수 있는 
		// 첫 번째 인덱스를 반환하고 존재하지 않으면 -1을 반환합니다.
		
		// 만일 ids변수에 id 찾아서 -1을 반환하지 않으면
		// 즉 아이디가 이미 있으면, "div태그에 아이디가 존재합니다" innerHTML
		if(ids.indexOf(id)!=-1){
			div.innerHTML="<b>아이디가 존재합니다.</b>";
		}else{
			// 아이디 중복 없으면 텍스트 출력 + input button태그 출력하는 변수생성
			// 디브 태그에 innnerHTML로 위를 넣음
			// 해당 변수 버튼 클릭시 insertId 함수 id 아규먼트 넣어서 실행
			// 값을 전달해주고 싶지만 ""혹은'' 를 해주지 않으면 변수로 들어감
			// onclick='insertId("+id+")' -> test : 변수로 들어감  
			// onclick='insertId(\""+id+"\")' -> "test" : 텍스트로 들어감
			//  \ -> 이스케이프 문자 특수한 문자 표기하기위해.
			// \" => 하나의 특수문자 쓰기위함 (\"는 이스케이프문자로 "" 표시)
			// "" => 문자열 시작과 끝을 표기 
			var userId="사용할 수 있는 아이디입니다."
			          +"<input type='button' value='확인'"
			          +"onclick='insertId(\""+id+"\")'>";
			div.innerHTML=userId;          
		}
	}
	
	// 중복확인창에 사용할 수 있는 아이디입니다 라는 메시지와 옆 확인버튼 누르면 동작
	// window01에 id이름가진 태그에 위 함수에서 받아온 id값 value로 넣어줌
	// 즉 아이디 input태그에 중복확인 완료한 id 집어넣음
	// opener.document.getElementsByName("id")[0].value="더블쿼테이션 포함 id에서 온 값"; 일케됨
	// opener.document.getElementsByName("id")[0].value="메롱메롱"; 하면 id에 메롱메롱 문자열 삽입됨
	function insertId(id){
		opener.document.getElementsByName("id")[0].value=id;


		// HTMLElement.focus() 지정된 요소에 초점을 맞춘다.

		// 아이디 중복확인해서 id값 value로 넣고나면 pwd input태그에 focus() 속성.
		// pwd 이름가진 태그 즉 비밀번호 입력창으로 focus
		// 즉 input태그 텍스트박스에 포커스(클릭 혹은 선택 혹은 마우스커서 옮겨줌) 해줌
		opener.document.getElementsByName("pwd")[0].focus();

		// 중복확인창 확인 누르면 창닫음
		close();
	}
</script>

</head>
<body>

	<table>
		<tr>
			<td>아이디</td>
			<td><input type="text" name="id"/></td>
		</tr>
		<tr>
			<td colspan="2">
				<input type="button" value="중복확인" onclick="confirmChk()"/>
				<input type="button" value="취소" onclick="self.close()"/>
			</td>
		</tr>
	</table>
	<div></div>

</body>
</html>